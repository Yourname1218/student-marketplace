# 📦 初始化資料庫說明

## 🎯 免費方案專用方法

因為 Render 免費方案沒有 Shell 功能，我們提供了一個 API 端點來初始化資料庫。

---

## ✅ 步驟：透過瀏覽器初始化資料庫

### 1. 確認後端已部署

確保你的 Render 服務已經部署完成，狀態顯示「**Live**」。

### 2. 記下你的 Render 網址

從 Render 服務頁面記下你的網址，例如：
```
https://wa-bao-qu-campus.onrender.com
```

### 3. 在瀏覽器開啟初始化網址

在瀏覽器輸入：
```
https://你的Render網址.onrender.com/api/init-db
```

例如：
```
https://wa-bao-qu-campus.onrender.com/api/init-db
```

### 4. 等待初始化完成

**第一次訪問**（如果伺服器休眠）：
- 需要等待 30-60 秒喚醒伺服器
- 這是 Render 免費方案的正常現象

**初始化過程**：
- 會建立 7 位測試使用者
- 會建立 60 個範例商品
- 大約需要 10-30 秒

### 5. 看到成功訊息

成功後會看到 JSON 格式的訊息：
```json
{
  "message": "資料庫初始化成功！",
  "usersCreated": 7,
  "productsCreated": 60,
  "testAccount": "xiaoming@student.edu.tw / 123456"
}
```

### 6. 測試登入

到你的前端網站（或本地開發）測試登入：
- **Email**: `xiaoming@student.edu.tw`
- **密碼**: `123456`

---

## ⚠️ 注意事項

### 1. 如果顯示「資料庫已經初始化過了」

表示資料庫已經有資料了，不需要再次初始化。

如果需要重新初始化：
1. 刪除 Render 服務
2. 重新建立服務
3. 再次執行初始化

### 2. Render 休眠機制

免費方案會在 15 分鐘沒有請求後休眠。

**解決方法**：
- 第一次訪問需要等待 30-60 秒
- 之後的訪問會正常速度
- 或者升級到付費方案（$7/月）

### 3. 初始化只能執行一次

為了保護資料，如果資料庫已經有使用者資料，不會再次初始化。

---

## 🔄 重新初始化（如果需要）

如果你想要重新初始化資料庫：

1. 刪除現有的 Render 服務
2. 重新建立服務
3. 再次執行初始化步驟

或者：

1. 在 Render 設定中新增環境變數：`RESET_DB=true`
2. 重新部署服務
3. 執行初始化

---

## ✅ 初始化檢查清單

- [ ] Render 服務已部署（顯示 Live）
- [ ] 記下 Render 網址
- [ ] 在瀏覽器開啟 `/api/init-db`
- [ ] 等待伺服器喚醒（如果需要）
- [ ] 看到成功訊息
- [ ] 測試登入功能

---

**初始化完成後，就可以開始使用網站了！** 🎉

